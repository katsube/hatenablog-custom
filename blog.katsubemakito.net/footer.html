<!-- ä¸Šã«ã‚‚ã©ã‚‹ãƒœã‚¿ãƒ³ -->
<div id="back-to-top"><i class="fa fa-arrow-up"></i></div>

<script type="text/javascript">
//-----------------------------------
// ãƒ˜ãƒƒãƒ€ç”»åƒã‚’åºƒã’ã‚‹
//-----------------------------------
window.addEventListener("DOMContentLoaded", ()=>{
 const blogTitle = document.querySelector("#blog-title");
 blogTitle.setAttribute("style",
   "background-image: url('https://cdn-ak.f.st-hatena.com/images/fotolife/k/katsube/20231006/20231006005542.jpg');" + 
   "background-repeat:no-repeat;"+
   "background-size: cover;" +
   "padding-top:0px;"
 );
  const blogTitleInner = document.querySelector("#blog-title-inner");
  blogTitleInner.setAttribute("style",
    "background-image: none;" +
    "padding-top: 20px;"
  );
});


//-----------------------------------
// ç›®æ¬¡ã‚’olã«ç½®æ›
//-----------------------------------
window.addEventListener("DOMContentLoaded", ()=>{
  const uls = document.querySelectorAll('.table-of-contents ul, .table-of-contents');
  Array.from(uls).forEach(ul => {
    const ol = document.createElement('ol');
    for (const attr of ul.attributes) {
      ol.setAttribute(attr.name, attr.value);
    }

    while (ul.firstChild) {
      ol.appendChild(ul.firstChild);
    }

    ul.parentNode.replaceChild(ol, ul);
  });
});

//-----------------------------------
// è¨€èªåã‚’è¡¨ç¤º
//-----------------------------------
window.addEventListener("load", function onLoad() {
  window.removeEventListener("load", onLoad);
  document.querySelectorAll("pre.code").forEach( (code)=>{
    const lang = code.getAttribute("data-lang");
    if ( lang ) {
      code.dataset.langLabel =  lang;
    }
  });
});

//-----------------------------------
// ã‚³ãƒ¡ãƒ³ãƒˆæ¬„
//-----------------------------------
document.addEventListener("DOMContentLoaded", () => {
  //-----------------------------------
  // ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã¨ãƒœã‚¿ãƒ³ã‚’ç›®ç«‹ãŸã›ã‚‹
  //-----------------------------------
  (() => {
    // ä¸€è¦§ãƒšãƒ¼ã‚¸ã§ã¯é©ç”¨ã—ãªã„
    const entries = document.querySelectorAll(".entry-content");
    if (entries.length !== 1)
      return;

    // ã‚¯ãƒ©ã‚¹è¿½åŠ 
    const box = document.querySelector(".js-comment-box");
    const btn = box?.querySelector(".js-leave-comment-title");
    if (!box || !btn)
      return;
    box.classList.add("comment-cta-big");

    // æ–‡è¨€è¿½åŠ 
    const after = document.createElement("p");
    after.className = "comment-note after";
    after.innerHTML = 'æ„Ÿæƒ³ã‚„è³ªå•ãªã©ãŠæ°—è»½ã«ã©ã†ãã€‚<br>ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ãè¾¼ã‚€ã«ã¯ã€Œ<a href="https://www.hatena.ne.jp/" target="_blank"><u>ã¯ã¦ãª</u></a>ã€ã®ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§<a href="https://accounts.hatena.ne.jp/login"><u>ãƒ­ã‚°ã‚¤ãƒ³</u></a>ãŒå¿…è¦ã§ã™ã€‚';
    box.appendChild(after);

    // ãƒœã‚¿ãƒ³ã®æ–‡è¨€è¨­å®š
    btn.innerHTML = "ğŸ’¬ ã‚³ãƒ¡ãƒ³ãƒˆã‚’æ›¸ã";
  })();

  //-----------------------------------
  // ã‚³ãƒ¡ãƒ³ãƒˆæ¬„ã«idä»˜ä¸
  //-----------------------------------
  (() => {
    const commentBox =
      document.querySelector('.comment-box')
      || document.querySelector('.js-comment-box');

    if (commentBox && !commentBox.id) {
      commentBox.id = 'comment-area';
    }
  })();
});


//-----------------------------------
// ä¸Šã«ã‚‚ã©ã‚‹ãƒœã‚¿ãƒ³
//-----------------------------------
(() => {
  const btn = document.getElementById("back-to-top");
  if (!btn) return;

  const showOffset = 200;

  window.addEventListener("scroll", () => {
    const y = window.pageYOffset || document.documentElement.scrollTop;

    if (y > showOffset) {
      btn.classList.add("is-visible");
    }
    else if (y <= 10) {  // ä¸Šã«10pxä½™ç™½ãŒæ®‹ã£ã¦ã„ã¦ã‚‚ãƒœã‚¿ãƒ³ã‚’æ¶ˆã™
      btn.classList.remove("is-visible");
    }
  }, { passive: true });

  btn.addEventListener("click", () => {
    window.scrollTo({
      top: 0,
      behavior: "smooth"
    });
  });
})();
</script>